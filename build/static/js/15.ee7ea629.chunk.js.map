{"version":3,"sources":["page/Settings/styled.jsx","page/Settings/Settings.jsx","page/Settings/index.js"],"names":["TitleEl","styled","div","BtnWrapper","SubmitBtn","SettingsWrapper","AlertEl","props","css","isActive","reference","Settings","state","jsonEditor","componentDidMount","JSONEditor","mode","mainMenuBar","navigationBar","statusBar","context","this","alert","ref","elem","onClick","e","currJsonEditorVal","get","user_id","clientName","mad_UUID","pixel_url","correlation_key","remainingEditorProps","UUID","getCookie","toString","trim","length","setCookie","localStorage","getItem","setItem","update_config_url","DefaultUserUrl","endPoint","update_config","userName","fetch","method","headers","body","JSON","stringify","user_name","config","then","data","json","resp","status","toLowerCase","client_name","API_KEY","updatedConfig","updateConfig","setState","message","catch","err","console","log","set","React","Component","contextType","ConfigContext"],"mappings":"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","file":"static/js/15.ee7ea629.chunk.js","sourcesContent":["import styled, { css } from 'styled-components'\n\nconst TitleEl = styled.div`\n    height: 3.5em;\n    line-height: 3.5em;\n    border-bottom: 1px solid #E2E2E2;\n    text-transform: uppercase;\n    text-align: center;\n    color: #064559;\n    font-size: 1.25em;\n    font-family: \"SourceSansPro-SemiBold\";\n    position: fixed;\n    top: 45px;\n    min-width: 1240px;\n    width: 100%;\n    z-index: 1;\n    background-color: #fff;\n`\n\nconst BtnWrapper = styled.div`\n    display: flex;\n    width: 80%;\n    margin: auto;\n    justify-content: center;\n    padding: 25px 0px;\n`\n\nconst SubmitBtn = styled.div`\n    color: #fff;\n    background-color: #FF7054;\n    padding: .5em 1em;\n    border-radius: 4px;\n    white-space: nowrap;\n    text-align: center;\n    border: solid 1px transparent;\n    cursor: pointer;\n    margin-right: 15px;\n    &:hover {\n        background-color: #ed2700;\n        color: #fff !important;\n    }\n`\n\nconst SettingsWrapper = styled.div`\n    padding-top: 130px;\n    margin: auto;\n    width: 80%;\n\n    .jsoneditor {\n        border: none;\n    }\n    .jsoneditor-values tr td:nth-child(2),\n    .jsoneditor-values tr td:last-child {\n        min-width: 250px;\n        div {\n            color: #064559;\n            font-family: \"SourceSansPro-Regular\";\n            font-size: 14px;\n            line-height: 30px;\n            letter-spacing: 0.7px;\n            margin-left: 10px;\n            &[contenteditable=\"true\"] {\n                width: 100%;\n                background-color: #fff;\n                border-color: #064559;\n                padding: 5px;\n            }\n            &.jsoneditor-boolean {\n                pointer-events: none;\n                border: none;\n                background: transparent;\n            }\n        }\n    }\n    .jsoneditor-values tr td:last-child {\n        width: 500px;\n    }\n    .jsoneditor-values {\n        display: flex;\n        tr {\n            margin-bottom: 10px;\n        }\n        td {\n            line-height: 30px;\n            vertical-align: text-top !important;\n        }\n        button {\n            vertical-align: inherit;\n        }\n    }\n    .jsoneditor-values tr {\n        display: flex;\n        justify-content: start;\n    }\n    .jsoneditor-values tbody {\n        width: 100%;\n    }\n    .jsoneditor-expandable .jsoneditor-values {\n        display: table;\n    }\n    .jsoneditor-expandable .jsoneditor-values tr td:nth-child(2n) {\n        min-width: auto;\n    }    \n`\n\nconst AlertEl = styled.div`\n    text-align: center;\n    font-family: \"SourceSansPro-Regular\";\n    font-size: 24px;\n    line-height: 30px;\n    font-weight: bold;\n    color: #db2828;\n    padding: 10px 60px;\n    width: 450px;\n    margin: 20px;\n    left: 32%;\n    background-color: #fff;\n    position: fixed;\n    z-index: 1;\n    box-sizing: border-box;\n    transition: transform .5s;\n    box-shadow: 0px 0px 21px -9px #000;\n    border-radius: 30px;\n    cursor: default;\n\n    ${props => css`\n        transform: ${props.isActive ? 'translate(10px, 100px)' : 'translate(10px, -55px)' };\n        ${props.isActive ? css`\n            & + ${SettingsWrapper} {\n                padding-top: 190px;\n            }\n        ` : null}\n    `}\n`\n\nexport {\n    SettingsWrapper,\n    TitleEl,\n    BtnWrapper,\n    SubmitBtn,\n    AlertEl\n}","import React from 'react'\nimport { ConfigContext } from '../../container'\nimport {\n    SettingsWrapper,\n    TitleEl,\n    SubmitBtn,\n    BtnWrapper,\n    AlertEl\n} from './styled'\nimport JSONEditor from 'jsoneditor'\nimport 'jsoneditor/dist/jsoneditor.css'\nimport { DefaultUserUrl } from '../../configs'\nimport { getCookie, setCookie } from '../../common'\n\nlet reference = null\n\nclass Settings extends React.Component {\n    static contextType = ConfigContext\n    state = {\n        'alert': ''\n    }\n    jsonEditor = null\n    componentDidMount= () => {\n        this.jsonEditor = new JSONEditor(reference, {\n                mode: 'form',\n                mainMenuBar: false,\n                navigationBar: false,\n                statusBar: false\n            },\n            this.context\n        )\n    }\n    \n    render() {\n        return <>\n            <TitleEl>Configuration</TitleEl>\n            <AlertEl isActive={this.state.alert !== ''}>{this.state.alert || ''}</AlertEl>\n            <SettingsWrapper ref={elem => reference = elem}>\n            </SettingsWrapper>\n            <BtnWrapper>\n                <SubmitBtn onClick={e => {\n                    const currJsonEditorVal = this.jsonEditor.get()\n                    const {\n                        clientName,\n                        user_id,\n                        pixel_url,\n                        correlation_key,\n                        mad_UUID,\n                        ...remainingEditorProps\n                    } = currJsonEditorVal\n                    const UUID = getCookie('mad_UUID')\n                    if(mad_UUID && mad_UUID.toString().trim().length && mad_UUID !== UUID) {\n                        setCookie('mad_UUID', mad_UUID, 365)\n                    }\n                    if(user_id && user_id.toString().trim().length && user_id !== localStorage.getItem('userId')) {\n                        localStorage.setItem('userId', user_id)\n                    }\n                    const update_config_url = DefaultUserUrl.endPoint + DefaultUserUrl.update_config\n                    const userName = localStorage.getItem('userName')\n                    fetch(update_config_url, {\n                        method: 'POST',\n                        headers: {\n                            'Content-Type': 'application/json'\n                        },\n                        body: JSON.stringify({\n                            user_name: userName,\n                            config: remainingEditorProps\n                        })\n                    })\n                    .then(data => data.json())\n                    .then(resp => {\n                        if(resp && resp.status && resp.status.toLowerCase() === 'success') {\n                            const {\n                                client_name,\n                                user_id,\n                                API_KEY,\n                                pixel_url\n                            } = this.context\n                            const updatedConfig = {\n                                ...currJsonEditorVal,\n                                client_name,\n                                user_id,\n                                API_KEY,\n                                pixel_url\n                            }\n                            this.context.updateConfig(updatedConfig)\n                            localStorage.setItem('userConfig', JSON.stringify(updatedConfig))\n                        }\n                        this.setState({ alert: resp.message || '' })\n                    })\n                    .catch(err => console.log(err))\n                }}>Apply</SubmitBtn>\n                <SubmitBtn onClick={e => this.jsonEditor.set(this.context)}>Reset</SubmitBtn>\n                <SubmitBtn onClick={e => {\n                    const currJsonEditorVal = this.jsonEditor.get()\n                    const {\n                        client_name,\n                        API_KEY,\n                        pixel_url,\n                    } = this.context\n                    const updatedConfig = {\n                        ...currJsonEditorVal,\n                        client_name,\n                        API_KEY,\n                        pixel_url\n                    }\n                    const {\n                        user_id,\n                        mad_UUID,\n                    } = currJsonEditorVal\n                    const UUID = getCookie('mad_UUID')\n                    if(mad_UUID && mad_UUID.toString().trim().length && mad_UUID !== UUID) {\n                        setCookie('mad_UUID', mad_UUID, 365)\n                    }\n                    if(user_id && user_id.toString().trim().length && user_id !== localStorage.getItem('userId')) {\n                        localStorage.setItem('userId', user_id)\n                    }\n                    this.context.updateConfig(updatedConfig)\n                    localStorage.setItem('userConfig', JSON.stringify(updatedConfig))\n                    this.setState({ alert: \"Saved in session\"})\n                }}>Save in Session</SubmitBtn>\n            </BtnWrapper>\n        </>\n    }\n}\n\nexport { Settings }","export { Settings } from './Settings'\nexport { Settings as default } from './Settings'"],"sourceRoot":""}